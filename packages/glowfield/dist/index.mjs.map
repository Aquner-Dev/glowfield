{"version":3,"sources":["../src/AuroraCanvas.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\n\nexport type GlowfieldProps = {\n  colors?: string[];\n  speed?: number;\n  intensity?: number;\n  className?: string;\n};\n\nexport function AuroraCanvas({\n  colors = [\"#7dd3fc\", \"#93c5fd\", \"#c4b5fd\"],\n  speed = 0.2,\n  intensity = 0.7,\n  className\n}: GlowfieldProps) {\n  const wrapRef = useRef<HTMLDivElement | null>(null);\n  const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\n\n  useEffect(() => {\n    const el = wrapRef.current;\n    if (!el) return;\n\n    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n    rendererRef.current = renderer;\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    renderer.setSize(el.clientWidth, el.clientHeight);\n    el.appendChild(renderer.domElement);\n\n    const scene = new THREE.Scene();\n    const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n\n    const uniforms: Record<string, THREE.IUniform> = {\n      u_time: { value: 0 },\n      u_res: { value: new THREE.Vector2(el.clientWidth, el.clientHeight) },\n      u_intensity: { value: intensity },\n      u_speed: { value: speed },\n      u_c0: { value: new THREE.Color(colors[0]) },\n      u_c1: { value: new THREE.Color(colors[1]) },\n      u_c2: { value: new THREE.Color(colors[2]) }\n    };\n\n    const frag = `\n      precision highp float;\n      uniform float u_time; uniform vec2 u_res;\n      uniform float u_speed; uniform float u_intensity;\n      uniform vec3 u_c0; uniform vec3 u_c1; uniform vec3 u_c2;\n      float n2(vec2 p){ return sin(p.x)*sin(p.y); }\n      void main(){\n        vec2 uv = gl_FragCoord.xy / u_res;\n        vec2 p = (uv - 0.5) * vec2(u_res.x/u_res.y, 1.0);\n        float t = u_time * u_speed;\n        float l1 = n2(p*3.0 + vec2(t*0.6, t*0.4));\n        float l2 = n2(p*2.0 - vec2(t*0.2, t*0.3));\n        float l3 = n2(p*4.0 + vec2(t*0.1, -t*0.5));\n        float band = smoothstep(0.0, 0.6, l1*0.5 + l2*0.35 + l3*0.15);\n        vec3 col = mix(u_c0, u_c1, band);\n        col = mix(col, u_c2, 0.5 + 0.5*sin(t*0.5 + l2*3.1415));\n        col *= u_intensity * (0.7 + 0.3 * smoothstep(0.0,1.0,1.0-length(p)));\n        gl_FragColor = vec4(col, 1.0);\n      }`;\n\n    const mat = new THREE.ShaderMaterial({\n      vertexShader: `void main(){ gl_Position = vec4(position,1.0); }`,\n      fragmentShader: frag,\n      uniforms,\n      transparent: true\n    });\n\n    const quad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), mat);\n    scene.add(quad);\n\n    const ro = new ResizeObserver(() => {\n      if (!rendererRef.current || !wrapRef.current) return;\n      const w = wrapRef.current.clientWidth, h = wrapRef.current.clientHeight;\n      rendererRef.current.setSize(w, h);\n      (uniforms.u_res.value as THREE.Vector2).set(w, h);\n    });\n    ro.observe(el);\n\n    let raf = 0;\n    const loop = (now: number) => {\n      uniforms.u_time.value = now * 0.001;\n      renderer.render(scene, camera);\n      raf = requestAnimationFrame(loop);\n    };\n    raf = requestAnimationFrame(loop);\n\n    return () => {\n      cancelAnimationFrame(raf);\n      ro.disconnect();\n      renderer.dispose();\n      el.removeChild(renderer.domElement);\n    };\n  }, [colors.join(\",\"), speed, intensity]);\n\n  return <div ref={wrapRef} className={className} style={{position:\"absolute\", inset:0}} aria-hidden />;\n}\n"],"mappings":";AACA,SAAS,WAAW,cAAc;AAClC,YAAY,WAAW;AA+Fd;AAtFF,SAAS,aAAa;AAAA,EAC3B,SAAS,CAAC,WAAW,WAAW,SAAS;AAAA,EACzC,QAAQ;AAAA,EACR,YAAY;AAAA,EACZ;AACF,GAAmB;AACjB,QAAM,UAAU,OAA8B,IAAI;AAClD,QAAM,cAAc,OAAmC,IAAI;AAE3D,YAAU,MAAM;AACd,UAAM,KAAK,QAAQ;AACnB,QAAI,CAAC,GAAI;AAET,UAAM,WAAW,IAAU,oBAAc,EAAE,WAAW,MAAM,OAAO,KAAK,CAAC;AACzE,gBAAY,UAAU;AACtB,aAAS,cAAc,KAAK,IAAI,OAAO,kBAAkB,CAAC,CAAC;AAC3D,aAAS,QAAQ,GAAG,aAAa,GAAG,YAAY;AAChD,OAAG,YAAY,SAAS,UAAU;AAElC,UAAM,QAAQ,IAAU,YAAM;AAC9B,UAAM,SAAS,IAAU,yBAAmB,IAAI,GAAG,GAAG,IAAI,GAAG,CAAC;AAE9D,UAAM,WAA2C;AAAA,MAC/C,QAAQ,EAAE,OAAO,EAAE;AAAA,MACnB,OAAO,EAAE,OAAO,IAAU,cAAQ,GAAG,aAAa,GAAG,YAAY,EAAE;AAAA,MACnE,aAAa,EAAE,OAAO,UAAU;AAAA,MAChC,SAAS,EAAE,OAAO,MAAM;AAAA,MACxB,MAAM,EAAE,OAAO,IAAU,YAAM,OAAO,CAAC,CAAC,EAAE;AAAA,MAC1C,MAAM,EAAE,OAAO,IAAU,YAAM,OAAO,CAAC,CAAC,EAAE;AAAA,MAC1C,MAAM,EAAE,OAAO,IAAU,YAAM,OAAO,CAAC,CAAC,EAAE;AAAA,IAC5C;AAEA,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBb,UAAM,MAAM,IAAU,qBAAe;AAAA,MACnC,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB;AAAA,MACA,aAAa;AAAA,IACf,CAAC;AAED,UAAM,OAAO,IAAU,WAAK,IAAU,oBAAc,GAAG,CAAC,GAAG,GAAG;AAC9D,UAAM,IAAI,IAAI;AAEd,UAAM,KAAK,IAAI,eAAe,MAAM;AAClC,UAAI,CAAC,YAAY,WAAW,CAAC,QAAQ,QAAS;AAC9C,YAAM,IAAI,QAAQ,QAAQ,aAAa,IAAI,QAAQ,QAAQ;AAC3D,kBAAY,QAAQ,QAAQ,GAAG,CAAC;AAChC,MAAC,SAAS,MAAM,MAAwB,IAAI,GAAG,CAAC;AAAA,IAClD,CAAC;AACD,OAAG,QAAQ,EAAE;AAEb,QAAI,MAAM;AACV,UAAM,OAAO,CAAC,QAAgB;AAC5B,eAAS,OAAO,QAAQ,MAAM;AAC9B,eAAS,OAAO,OAAO,MAAM;AAC7B,YAAM,sBAAsB,IAAI;AAAA,IAClC;AACA,UAAM,sBAAsB,IAAI;AAEhC,WAAO,MAAM;AACX,2BAAqB,GAAG;AACxB,SAAG,WAAW;AACd,eAAS,QAAQ;AACjB,SAAG,YAAY,SAAS,UAAU;AAAA,IACpC;AAAA,EACF,GAAG,CAAC,OAAO,KAAK,GAAG,GAAG,OAAO,SAAS,CAAC;AAEvC,SAAO,oBAAC,SAAI,KAAK,SAAS,WAAsB,OAAO,EAAC,UAAS,YAAY,OAAM,EAAC,GAAG,eAAW,MAAC;AACrG;","names":[]}