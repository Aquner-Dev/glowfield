{"version":3,"sources":["../src/AuroraCanvas.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\n\ntype LutInput =\n  | string[]\n  | number[]\n  | Uint8Array\n  | Float32Array\n  | THREE.DataTexture;\n\nconst DEFAULT_LUT = [\n  \"#0f172a\",\n  \"#1e3a8a\",\n  \"#4c1d95\",\n  \"#7e22ce\",\n  \"#f472b6\",\n  \"#fcd34d\",\n];\n\nfunction toUint8ArrayFromHex(colors: string[]): Uint8Array {\n  const data = new Uint8Array(colors.length * 4);\n  colors.forEach((hex, index) => {\n    const color = new THREE.Color(hex);\n    const offset = index * 4;\n    data[offset] = Math.round(color.r * 255);\n    data[offset + 1] = Math.round(color.g * 255);\n    data[offset + 2] = Math.round(color.b * 255);\n    data[offset + 3] = 255;\n  });\n  return data;\n}\n\nfunction configureLutTexture(texture: THREE.DataTexture) {\n  texture.wrapS = THREE.ClampToEdgeWrapping;\n  texture.wrapT = THREE.ClampToEdgeWrapping;\n  texture.magFilter = THREE.LinearFilter;\n  texture.minFilter = THREE.LinearFilter;\n  texture.generateMipmaps = false;\n  texture.needsUpdate = true;\n}\n\nfunction createLutTexture(lut: LutInput | undefined, fallback: string[]) {\n  if (lut instanceof THREE.DataTexture) {\n    configureLutTexture(lut);\n    return { texture: lut, disposeOnCleanup: false };\n  }\n\n  let data: Uint8Array | Float32Array;\n  let width = 0;\n  let type: THREE.TextureDataType = THREE.UnsignedByteType;\n\n  if (Array.isArray(lut)) {\n    const allStrings = lut.every((value) => typeof value === \"string\");\n    if (allStrings) {\n      data = toUint8ArrayFromHex(lut as string[]);\n      width = (lut as string[]).length;\n    } else if (lut.every((value) => typeof value === \"number\")) {\n      const numeric = lut as number[];\n      if (numeric.length % 4 !== 0) {\n        throw new Error(\n          \"Numeric LUT array length must be a multiple of 4 (RGBA per stop).\"\n        );\n      }\n      data = new Float32Array(numeric);\n      width = numeric.length / 4;\n      type = THREE.FloatType;\n    } else {\n      throw new Error(\n        \"Unsupported LUT array contents. Provide hex strings or RGBA numeric data.\"\n      );\n    }\n  } else if (lut instanceof Uint8Array || lut instanceof Float32Array) {\n    data = lut;\n    width = lut.length / 4;\n    type =\n      lut instanceof Float32Array ? THREE.FloatType : THREE.UnsignedByteType;\n  } else {\n    data = toUint8ArrayFromHex(fallback);\n    width = fallback.length;\n  }\n\n  if (!Number.isInteger(width) || width <= 0) {\n    throw new Error(\"LUT width must be a positive integer.\");\n  }\n\n  const texture = new THREE.DataTexture(data, width, 1, THREE.RGBAFormat, type);\n  configureLutTexture(texture);\n  return { texture, disposeOnCleanup: true };\n}\n\nexport type GlowfieldProps = {\n  lut?: LutInput;\n  /** @deprecated colors は LUT が未指定の場合のフォールバックとして扱われます。 */\n  colors?: string[];\n  speed?: number;\n  intensity?: number;\n  pointerStrength?: number;\n  className?: string;\n};\n\nexport function AuroraCanvas({\n  lut,\n  colors,\n  speed = 0.3,\n  intensity = 0.9,\n  pointerStrength = 0.2,\n  className,\n}: GlowfieldProps) {\n  const wrapRef = useRef<HTMLDivElement | null>(null);\n  const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\n\n  useEffect(() => {\n    const el = wrapRef.current;\n    if (!el) return;\n\n    const canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"webgl2\", {\n      alpha: true,\n      antialias: true,\n      premultipliedAlpha: false,\n      powerPreference: \"high-performance\",\n    });\n    if (!context) {\n      console.warn(\n        \"[glowfield] WebGL2 コンテキストの取得に失敗したため描画をスキップします。\"\n      );\n      return;\n    }\n\n    const renderer = new THREE.WebGLRenderer({ canvas, context });\n    rendererRef.current = renderer;\n    renderer.autoClear = true;\n    renderer.setClearColor(0x000000, 0);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    renderer.setSize(el.clientWidth, el.clientHeight);\n    el.appendChild(renderer.domElement);\n\n    const scene = new THREE.Scene();\n    const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n\n    const fallbackColors = colors && colors.length ? colors : DEFAULT_LUT;\n    const { texture: lutTexture, disposeOnCleanup } = createLutTexture(\n      lut,\n      fallbackColors\n    );\n\n    const pointerUniform = new THREE.Vector2(0.5, 0.5);\n    const pointerTarget = new THREE.Vector2(0.5, 0.5);\n    const pointerMomentum = new THREE.Vector2(0, 0);\n    const pointerDelta = new THREE.Vector2(0, 0);\n\n    const uniforms: Record<string, THREE.IUniform> = {\n      u_time: { value: 0 },\n      u_res: { value: new THREE.Vector2(el.clientWidth, el.clientHeight) },\n      u_intensity: { value: intensity },\n      u_speed: { value: speed },\n      u_pointer: { value: pointerUniform },\n      u_pointerStrength: { value: pointerStrength },\n      u_pointerMomentum: { value: pointerMomentum },\n      u_motionEnabled: { value: 1 },\n      u_lut: { value: lutTexture },\n    };\n\n    const fragmentShader = `precision highp float;\n\nuniform float u_time;\nuniform vec2 u_res;\nuniform float u_speed;\nuniform float u_intensity;\nuniform vec2 u_pointer;\nuniform float u_pointerStrength;\nuniform vec2 u_pointerMomentum;\nuniform float u_motionEnabled;\nuniform sampler2D u_lut;\n\nconst float PI = 3.141592653589793;\n\nout vec4 fragColor;\n\nfloat hash21(vec2 p) {\n  p = fract(p * vec2(123.34, 345.45));\n  p += dot(p, p + 34.345);\n  return fract(p.x * p.y);\n}\n\nfloat noise(vec2 p) {\n  vec2 i = floor(p);\n  vec2 f = fract(p);\n  float a = hash21(i);\n  float b = hash21(i + vec2(1.0, 0.0));\n  float c = hash21(i + vec2(0.0, 1.0));\n  float d = hash21(i + vec2(1.0, 1.0));\n  vec2 u = f * f * (3.0 - 2.0 * f);\n  return mix(a, b, u.x) + (c - a) * u.y * (1.0 - u.x) + (d - b) * u.x * u.y;\n}\n\nfloat fbm(vec2 p) {\n  float value = 0.0;\n  float amplitude = 0.55;\n  mat2 m = mat2(1.6, -1.2, 1.2, 1.6);\n  for (int i = 0; i < 3; i++) {\n    value += amplitude * noise(p);\n    p = m * p;\n    amplitude *= 0.52;\n  }\n  return clamp(value, 0.0, 1.0);\n}\n\nfloat smoothWave(vec2 p, float freqX, float freqY, float phase, float bend) {\n  float w = sin(p.x * freqX + phase);\n  w += sin((p.x * 0.6 + p.y * bend) * freqY + phase * 0.6) * 0.6;\n  w += sin((p.y * freqY - p.x * 0.35) - phase * 0.4) * 0.45;\n  return w;\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_res;\n  vec2 p = uv - 0.5;\n  float aspect = u_res.x / u_res.y;\n  p.x *= aspect;\n\n  float time = u_time * u_speed * u_motionEnabled;\n\n  vec2 pointer = (u_pointer - vec2(0.5)) * 2.0;\n  pointer.x *= aspect;\n  vec2 influence = (pointer + u_pointerMomentum * 1.7) * u_pointerStrength;\n\n  vec2 warped = p;\n  warped += vec2(\n    sin((p.y + time * 0.22) * 1.6),\n    sin((p.x - time * 0.18) * 1.4)\n  ) * 0.12;\n  warped += influence * 0.35;\n\n  float base = smoothWave(warped, 1.9, 1.1, time * 0.45 + influence.x * 2.2, 1.05);\n  float cross = smoothWave(warped.yx, 1.4, 0.8, -time * 0.38 + influence.y * 1.8, 0.7);\n  float sweep = sin((warped.x * 1.15 + warped.y * 1.4) + time * 0.55 + influence.x * 2.4) * 0.35;\n  float drift = sin((warped.x * 0.7 - warped.y * 0.9) - time * 0.33 + influence.y * 2.1) * 0.28;\n  float secondary = sin((warped.x + warped.y) * 0.9 + time * 0.3) * 0.18;\n\n  float field = 0.5\n    + base * 0.34\n    + cross * 0.28\n    + sweep * 0.26\n    + drift * 0.22\n    + secondary;\n\n  float micro = fbm(warped * 2.2 + vec2(time * 0.16, time * 0.12)) * 0.22;\n  float slowGrad = smoothstep(-1.1, 1.1, warped.y + sin(warped.x * 0.7 + time * 0.2) * 0.12) * 0.18;\n  field += micro + slowGrad;\n\n  field += dot(influence, vec2(0.5, -0.42));\n  field = clamp(field, 0.0, 1.0);\n\n  float breathing = 0.93 + 0.1 * sin(time * 0.52 + micro * PI * 4.0);\n\n  vec3 color = texture(u_lut, vec2(field, 0.5)).rgb;\n  color *= breathing * u_intensity;\n\n  fragColor = vec4(color, 1.0);\n}\n    `;\n\n    const material = new THREE.RawShaderMaterial({\n      vertexShader: `\nin vec3 position;\nvoid main() {\n  gl_Position = vec4(position, 1.0);\n}\n      `.trim(),\n      fragmentShader,\n      uniforms,\n      transparent: true,\n      glslVersion: THREE.GLSL3,\n    });\n\n    const quad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), material);\n    scene.add(quad);\n\n    const resizeObserver = new ResizeObserver(() => {\n      if (!rendererRef.current || !wrapRef.current) return;\n      const width = wrapRef.current.clientWidth;\n      const height = wrapRef.current.clientHeight;\n      rendererRef.current.setSize(width, height);\n      (uniforms.u_res.value as THREE.Vector2).set(width, height);\n    });\n    resizeObserver.observe(el);\n\n    const media = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    const updateMotionPreference = () => {\n      const enabled = media.matches ? 0 : 1;\n      uniforms.u_motionEnabled.value = enabled;\n      if (enabled === 0) {\n        if (rafId !== 0) {\n          cancelAnimationFrame(rafId);\n          rafId = 0;\n        }\n        renderer.render(scene, camera);\n      } else if (rafId === 0) {\n        rafId = requestAnimationFrame(loop);\n      }\n    };\n    media.addEventListener(\"change\", updateMotionPreference);\n\n    let rafId = 0;\n    const loop = (now: number) => {\n      pointerDelta.copy(pointerTarget).sub(pointerUniform);\n      pointerUniform.addScaledVector(pointerDelta, 0.05);\n      pointerMomentum.lerp(pointerDelta, 0.16);\n      uniforms.u_pointerMomentum.value.set(\n        pointerMomentum.x,\n        pointerMomentum.y\n      );\n      uniforms.u_time.value = now * 0.001;\n      renderer.render(scene, camera);\n      rafId = requestAnimationFrame(loop);\n    };\n\n    const handlePointerMove = (event: PointerEvent) => {\n      const rect = el.getBoundingClientRect();\n      const x = (event.clientX - rect.left) / rect.width;\n      const y = (event.clientY - rect.top) / rect.height;\n      pointerTarget.set(\n        THREE.MathUtils.clamp(x, 0, 1),\n        THREE.MathUtils.clamp(1 - y, 0, 1)\n      );\n      if (uniforms.u_motionEnabled.value === 0) {\n        pointerUniform.copy(pointerTarget);\n        pointerMomentum.set(0, 0);\n        uniforms.u_pointerMomentum.value.set(0, 0);\n        renderer.render(scene, camera);\n      }\n    };\n    const resetPointer = () => {\n      pointerTarget.set(0.5, 0.5);\n    };\n\n    el.addEventListener(\"pointermove\", handlePointerMove);\n    el.addEventListener(\"pointerleave\", resetPointer);\n\n    updateMotionPreference();\n    if (uniforms.u_motionEnabled.value === 1) {\n      rafId = requestAnimationFrame(loop);\n    } else {\n      renderer.render(scene, camera);\n    }\n\n    return () => {\n      if (rafId) cancelAnimationFrame(rafId);\n      media.removeEventListener(\"change\", updateMotionPreference);\n      resizeObserver.disconnect();\n      el.removeEventListener(\"pointermove\", handlePointerMove);\n      el.removeEventListener(\"pointerleave\", resetPointer);\n      scene.remove(quad);\n      quad.geometry.dispose();\n      material.dispose();\n      if (disposeOnCleanup) lutTexture.dispose();\n      renderer.dispose();\n      if (el.contains(renderer.domElement)) {\n        el.removeChild(renderer.domElement);\n      }\n    };\n  }, [lut, colors ? colors.join(\",\") : \"\", speed, intensity, pointerStrength]);\n\n  return (\n    <div\n      ref={wrapRef}\n      className={className}\n      style={{ position: \"absolute\", inset: 0 }}\n      aria-hidden\n    />\n  );\n}\n"],"mappings":"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","names":[]}